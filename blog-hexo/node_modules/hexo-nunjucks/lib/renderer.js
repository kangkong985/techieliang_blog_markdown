'use strict';

var nunjucks = require('nunjucks');

var nunjucksCompile = function(data) {
    var env = nunjucks.configure(data.path, {
        watch: true,
        autoescape: false
    });
    return nunjucks.compile(data.text, env, data.path);
}

function nunjucksRenderer(data, locals) {
    return nunjucksCompile(data).render(locals);
}

nunjucksRenderer.compile = function(data) {
    return function(locals) {
        return nunjucksCompile(data).render(locals);
    }
};

module.exports = nunjucksRenderer;
